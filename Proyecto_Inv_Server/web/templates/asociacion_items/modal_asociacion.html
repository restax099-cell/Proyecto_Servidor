<div x-show="isModalOpen" x-cloak class="fixed inset-0 z-50 flex items-start justify-center pt-[15vh] px-4"
    x-transition:enter="transition ease-out duration-300"
    x-transition:enter-start="opacity-0"
    x-transition:enter-end="opacity-100"
    x-transition:leave="transition ease-in duration-200"
    x-transition:leave-start="opacity-100"
    x-transition:leave-end="opacity-0">

    <!-- Backdrop clickable para cerrar -->
    <div class="absolute inset-0 bg-slate-900/40 backdrop-blur-md" @click="closeModal()"></div>

    <!-- Contenedor del Modal -->
    <div class="bg-white rounded-3xl shadow-[0_20px_60px_-15px_rgba(0,0,0,0.3)] w-full max-w-xl overflow-hidden border border-white/20 relative z-10"
            x-show="isModalOpen"
            x-transition:enter="transition ease-out duration-300 delay-75"
            x-transition:enter-start="opacity-0 -translate-y-8 scale-95"
            x-transition:enter-end="opacity-100 translate-y-0 scale-100"
            x-transition:leave="transition ease-in duration-150"
            x-transition:leave-start="opacity-100 translate-y-0 scale-100"
            x-transition:leave-end="opacity-0 -translate-y-4 scale-95">
        
        <div class="relative border-b border-slate-100">
            <span class="absolute left-6 top-1/2 -translate-y-1/2 text-indigo-500" x-html="renderIcon('search', 'w-6 h-6')"></span>
            <input type="text" x-ref="searchInput" x-model="modalSearch" placeholder="Busca un ingrediente o bebida..." 
                    class="w-full bg-transparent text-slate-800 text-lg font-medium p-6 pl-16 outline-none placeholder:text-slate-300">
            <button @click="closeModal()" class="absolute right-4 top-1/2 -translate-y-1/2 bg-slate-100 hover:bg-slate-200 text-slate-500 p-1.5 rounded-full transition-colors">
                <span x-html="renderIcon('x', 'w-4 h-4')"></span>
            </button>
        </div>
        
        <div class="p-2 bg-slate-50/50">
            <div class="max-h-80 overflow-y-auto p-2 space-y-1 custom-scrollbar">
                
                <template x-if="filteredDb.length === 0">
                    <div class="text-center py-10">
                        <span class="text-slate-200 mx-auto mb-3 block w-10 h-10" x-html="renderIcon('database', 'w-10 h-10')"></span>
                        <p class="text-slate-500 font-medium">No se encontr√≥ en tu base de datos.</p>
                    </div>
                </template>

                <template x-for="dbItem in filteredDb" :key="dbItem">
                    <button @click="selectInventoryItem(dbItem)" class="group w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left text-slate-700 hover:bg-white hover:shadow-sm hover:text-indigo-700 transition-all border border-transparent hover:border-slate-200">
                        <div class="bg-slate-100 group-hover:bg-indigo-50 p-2 rounded-lg transition-colors">
                            <span class="text-slate-400 group-hover:text-indigo-500" x-html="renderIcon('database', 'w-4 h-4')"></span>
                        </div>
                        <span class="font-medium" x-text="dbItem"></span>
                    </button>
                </template>
            </div>
        </div>
    </div>
</div>